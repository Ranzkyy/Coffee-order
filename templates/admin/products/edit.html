{% extends 'admin/layout.html' %}

{% block content %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a href="{{ url_for('admin_dashboard') }}">Home</a>
    </li>
    <li class="breadcrumb-item">
      <a href="{{ url_for('admin_products') }}">Products</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Edit</li>
  </ol>
</nav>

<h2 class="text-center">Edit Product</h2>

<div class="card shadow border-0 p-5">
  <div class="container">
    <form 
      method="POST" 
      action="{{ url_for('edit_product', product_id=product._id) }}" 
      enctype="multipart/form-data" 
      class="edit-form"
    >
      <div class="mb-3">
        <label for="name" class="form-label">Coffee Name</label>
        <input 
          type="text" 
          id="name" 
          name="name" 
          value="{{ product.name }}" 
          required 
          class="form-control" 
        />
      </div>

      <div class="mb-3">
        <label for="category" class="form-label">Category</label>
        <select name="category" class="form-select">
          <option value="Coffee" {% if product.category == "Coffee" %}selected{% endif %}>Coffee</option>
          <option value="Tea" {% if product.category == "Tea" %}selected{% endif %}>Tea</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea 
          id="description" 
          name="description" 
          required 
          class="form-control"
        >{{ product.description }}</textarea>
      </div>

      <div class="mb-3">
        <label for="price" class="form-label">Price</label>
        <input 
          type="number" 
          id="price" 
          name="price" 
          value="{{ product.price }}" 
          required 
          class="form-control" 
        />
      </div>

      <div class="mb-3">
        <label for="stock" class="form-label">Stock</label>
        <input 
          type="number" 
          id="stock" 
          name="stock" 
          value="{{ product.stock }}" 
          required 
          class="form-control" 
        />
      </div>

      <div class="mb-3">
        <label for="image" class="form-label">Upload New Image (optional)</label>
        <input 
          type="file" 
          id="image" 
          name="image" 
          accept="image/*" 
          class="form-control" 
        />
        <p class="form-text">Current Image:</p>
        <img 
          src="{{ url_for('static', filename='images/' + product.image_filename) }}" 
          alt="{{ product.name }}" 
          class="rounded img-thumbnail" 
          style="max-width: 150px;"
        />
      </div>

      <button type="submit" class="btn btn-primary float-end">Save Changes</button>
    </form>
  </div>
</di

{% endblock %}